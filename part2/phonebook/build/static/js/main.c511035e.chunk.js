(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var r=t(1),u=t(5),c=t.n(u),i=t(7),a=t(3),o=t(4),l=t.n(o),s="/api/persons",d=function(){return l.a.get(s).then((function(e){return e.data}))},b=function(e){return l.a.post(s,e).then((function(e){return e.data}))},j=function(e){console.log("clicked for phone no"+e),l.a.delete(s+"/"+e)},f=function(e){return l.a.put(s+"/"+e.id,e).then((function(e){return e.data}))},h=t(0),m=function(e){var n=e.person,t=e.handleDeletePerson;return Object(h.jsxs)("li",{children:[n.name," ",n.number,Object(h.jsx)("button",{onClick:function(){!function(e){window.confirm("Delete "+e.name+" ?")&&(j(e.id),t(e.id))}(n)},children:"delete"})]})},O=function(e){var n=e.allpersons,t=e.newFilter,r=e.handleDeletePerson;return 0===t.length?n.map((function(e){return Object(h.jsx)(m,{person:e,handleDeletePerson:r},e.id)})):n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(h.jsx)(m,{person:e,handleDeletePerson:r},e.id)}))},g=function(e){return Object(h.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(h.jsxs)("div",{children:["name : ",Object(h.jsx)("input",{value:e.newName,onChange:e.namehandler}),"number : ",Object(h.jsx)("input",{value:e.newNumber,onChange:e.numberhandler})]}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.msg,t=e.value,r=e.onChange;return Object(h.jsxs)("div",{children:[n,Object(h.jsx)("input",{value:t,onChange:r})]})},x=function(e){var n=e.message;if(null===n)return null;return Object(h.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},v=function(e){var n=e.message;if(null===n)return null;return Object(h.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},w=function(){var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],u=n[1],c=Object(r.useState)(""),o=Object(a.a)(c,2),l=o[0],s=o[1],j=Object(r.useState)(""),m=Object(a.a)(j,2),w=m[0],S=m[1],y=Object(r.useState)(""),C=Object(a.a)(y,2),D=C[0],k=C[1],N=Object(r.useState)(null),P=Object(a.a)(N,2),B=P[0],F=P[1],z=Object(r.useState)(null),E=Object(a.a)(z,2),J=E[0],L=E[1];Object(r.useEffect)((function(){d().then((function(e){return u(e)}))}),[]);var R=function(e){F(e),setTimeout((function(){F(null)}),5e3)},T=function(e){L(e),setTimeout((function(){L(null)}),3e3)};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"PhoneBook"}),Object(h.jsx)(x,{message:B}),Object(h.jsx)(v,{message:J}),Object(h.jsx)(p,{msg:"Filter shown with",value:D,onChange:function(e){k(e.target.value)}}),Object(h.jsx)(g,{onSubmit:function(e){if(e.preventDefault(),l.length<3)T("Name should be at least 3 characters\n \u0637\u0644\u0628\u0643 \u0645\u0631\u0641\u0648\u0636 \u064a\u0627 \u0646\u0631\u0645");else if(w.length<8)T("Number should be at least 8 digits\n \u0637\u0644\u0628\u0643 \u0645\u0631\u0641\u0648\u0636 \u064a\u0627 \u0646\u0631\u0645");else{var n=t.filter((function(e){return e.name===l}));if(n.length>0){if(window.confirm("".concat(l," already exists. Do you want to replace the old number with the new one ?"))){var r=Object(i.a)(Object(i.a)({},n[0]),{},{number:w});f(r).then((function(e){u(t.map((function(n){return n.id==e.id?e:n}))),R("".concat(e.name," updated Successfully"))}))}}else{var c={name:l,number:w,id:t.reduce((function(e,n){return Math.max(n.id,e)}),0)+1};b(c).then((function(e){u(t.concat(e)),R("".concat(e.name," Added Successfully"))})),s(""),S("")}}},newName:l,namehandler:function(e){s(e.target.value)},newNumber:w,numberhandler:function(e){S(e.target.value)}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)("div",{children:Object(h.jsx)("ul",{children:Object(h.jsx)(O,{allpersons:t,newFilter:D,handleDeletePerson:function(e){u(t.filter((function(n){return n.id!=e})))}})})})]})};c.a.render(Object(h.jsx)(w,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.c511035e.chunk.js.map