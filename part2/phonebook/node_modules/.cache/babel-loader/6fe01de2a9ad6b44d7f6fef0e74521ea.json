{"ast":null,"code":"import _objectSpread from\"/home/mohamed/fullstackopen/part2/phonebook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/mohamed/fullstackopen/part2/phonebook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Display from'./Components/Display';import PersonForm from'./Components/PersonForm';import Filter from'./Components/Filter';import personDB from'./services/personsDB';import Notification from'./Components/Notification';import ErrorMessage from'./Components/ErrorMessage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allPersons=_useState2[0],setAllPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newFilter=_useState8[0],setNewFilter=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),notification=_useState10[0],setNotification=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),errorMessage=_useState12[0],setErrorMessage=_useState12[1];/*useEffect(() =>\n    axios\n        .get(\"http://localhost:3001/persons\")\n        .then(response =>{\n            setAllPersons(response.data);\n        })\n  ,[])*/useEffect(function(){personDB.getAll().then(function(data){return setAllPersons(data);});},[]);var handleInputName=function handleInputName(event){setNewName(event.target.value);};var handleInputNum=function handleInputNum(event){setNewNumber(event.target.value);};var handleNotification=function handleNotification(message){setNotification(message);setTimeout(function(){setNotification(null);},5000);};var handleErroMessage=function handleErroMessage(message){setErrorMessage(message);setTimeout(function(){setErrorMessage(null);},3000);};var addNote=function addNote(event){event.preventDefault();if(newName.length<3){handleErroMessage(\"Name should be at least 3 characters\\n طلبك مرفوض يا نرم\");return;}if(newNumber.length<8){handleErroMessage(\"Number should be at least 8 digits\\n طلبك مرفوض يا نرم\");return;}var repeated=allPersons.filter(function(person){return person.name===newName;});if(repeated.length>0){if(window.confirm(\"\".concat(newName,\" already exists. Do you want to replace the old number with the new one ?\"))){var updatedNumber=_objectSpread(_objectSpread({},repeated[0]),{},{number:newNumber});personDB.update(updatedNumber).then(function(response){setAllPersons(allPersons.map(function(person){return person.id==response.id?response:person;}));handleNotification(\"\".concat(response.name,\" updated Successfully\"));});}return;}var newObj={name:newName,number:newNumber,id:allPersons.reduce(function(t,person){return Math.max(person.id,t);},0)+1};personDB.create(newObj).then(function(response){setAllPersons(allPersons.concat(response));handleNotification(\"\".concat(response.name,\" Added Successfully\"));});setNewName('');setNewNumber('');};var handleDeletePerson=function handleDeletePerson(id){setAllPersons(allPersons.filter(function(person){return person.id!=id;}));};var handleNewFilter=function handleNewFilter(event){setNewFilter(event.target.value);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"PhoneBook\"}),/*#__PURE__*/_jsx(Notification,{message:notification}),/*#__PURE__*/_jsx(ErrorMessage,{message:errorMessage}),/*#__PURE__*/_jsx(Filter,{msg:\"Filter shown with\",value:newFilter,onChange:handleNewFilter}),/*#__PURE__*/_jsx(PersonForm,{onSubmit:addNote,newName:newName,namehandler:handleInputName,newNumber:newNumber,numberhandler:handleInputNum}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(Display,{allpersons:allPersons,newFilter:newFilter,handleDeletePerson:handleDeletePerson})})})]});};export default App;","map":{"version":3,"sources":["/home/mohamed/fullstackopen/part2/phonebook/src/App.js"],"names":["React","useEffect","useState","Display","PersonForm","Filter","personDB","Notification","ErrorMessage","App","allPersons","setAllPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","notification","setNotification","errorMessage","setErrorMessage","getAll","then","data","handleInputName","event","target","value","handleInputNum","handleNotification","message","setTimeout","handleErroMessage","addNote","preventDefault","length","repeated","filter","person","name","window","confirm","updatedNumber","number","update","response","map","id","newObj","reduce","t","Math","max","create","concat","handleDeletePerson","handleNewFilter"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Display from './Components/Display';\nimport PersonForm from './Components/PersonForm';\nimport Filter from './Components/Filter';\nimport personDB from './services/personsDB';\nimport Notification from './Components/Notification';\nimport ErrorMessage from './Components/ErrorMessage';\nconst App = () => {\n  const [allPersons, setAllPersons] = useState([]);\n  const [newName , setNewName] = useState('');\n  const [newNumber , setNewNumber] = useState('');\n  const [newFilter , setNewFilter] = useState('');\n  const [notification , setNotification] = useState(null);\n  const [errorMessage , setErrorMessage] = useState(null);\n  /*useEffect(() =>\n    axios\n        .get(\"http://localhost:3001/persons\")\n        .then(response =>{\n            setAllPersons(response.data);\n        })\n  ,[])*/\n  \nuseEffect(() =>{\n  personDB.getAll().then(data => setAllPersons(data));\n}, [])\n  \n\n  const handleInputName = (event) =>{\n    setNewName(event.target.value);\n  }\n\n  const handleInputNum = (event) =>{\n    setNewNumber(event.target.value);\n  }\n  \n  const handleNotification = message =>{\n    setNotification(message);\n    setTimeout(() => {\n      setNotification(null)\n    }, 5000);\n  }\n\n  const handleErroMessage = message =>{\n    setErrorMessage(message);\n    setTimeout(()=>{\n      setErrorMessage(null)},3000\n      );\n  }\n\n  const addNote = (event) =>{\n\n    event.preventDefault()\n\n    if(newName.length < 3 ){\n      handleErroMessage(\"Name should be at least 3 characters\\n طلبك مرفوض يا نرم\")\n      return\n    }\n    if(newNumber.length < 8 ){\n      handleErroMessage(\"Number should be at least 8 digits\\n طلبك مرفوض يا نرم\")\n      return\n    }  \n    \n    const repeated = allPersons.filter(person => person.name === newName);\n\n    if(repeated.length > 0){\n        if(window.confirm(`${newName} already exists. Do you want to replace the old number with the new one ?`)){\n          const updatedNumber = {...repeated[0] , number : newNumber}\n\n          personDB.update(updatedNumber)\n          .then(response =>{\n            setAllPersons(allPersons.map(person =>\n              person.id == response.id ? response : person\n            ))\n            handleNotification(\n              `${response.name} updated Successfully`\n            )\n          })\n\n        }\n        return\n    }\n\n    const newObj = {\n        name : newName,\n        number : newNumber,\n        id : allPersons.reduce((t,person) => Math.max(person.id, t),0) +1\n    }\n    personDB.create(newObj).then(response => {\n      setAllPersons(allPersons.concat(response));\n      handleNotification(`${response.name} Added Successfully`) \n\n    })\n    setNewName(''); \n    setNewNumber('');\n\n  }\n\n  const handleDeletePerson = (id) =>{\n    \n    setAllPersons(allPersons.filter(\n      person=> person.id != id\n    ))\n\n  }\n  \n\n  const handleNewFilter = (event) =>{\n    setNewFilter(event.target.value)\n  }\n\n  return (\n    <div>\n\n      <h2>PhoneBook</h2>\n      <Notification message = {notification} />\n      <ErrorMessage message = {errorMessage}/>\n      <Filter msg = 'Filter shown with' value = {newFilter} onChange={handleNewFilter}/>\n\n      <PersonForm onSubmit = {addNote} newName = {newName}\n                  namehandler = {handleInputName}\n                  newNumber = {newNumber} numberhandler = {handleInputNum}/>\n\n     <h2>Numbers</h2>\n      <div>\n        <ul>\n          <Display allpersons = {allPersons} newFilter \n              = {newFilter} handleDeletePerson ={handleDeletePerson}/> \n        </ul>\n      </div>\n    </div>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}