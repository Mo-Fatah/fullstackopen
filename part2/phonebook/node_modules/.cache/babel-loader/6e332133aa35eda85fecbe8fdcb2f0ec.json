{"ast":null,"code":"import _objectSpread from\"/home/mohamed/fullstackopen/part2/phonebook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/mohamed/fullstackopen/part2/phonebook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Display from'./Components/Display';import PersonForm from'./Components/PersonForm';import Filter from'./Components/Filter';import personDB from'./services/personsDB';import Notification from'./Components/Notification';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allPersons=_useState2[0],setAllPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newFilter=_useState8[0],setNewFilter=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),notification=_useState10[0],setNotification=_useState10[1];/*useEffect(() =>\n    axios\n        .get(\"http://localhost:3001/persons\")\n        .then(response =>{\n            setAllPersons(response.data);\n        })\n  ,[])*/useEffect(function(){personDB.getAll().then(function(data){return setAllPersons(data);});},[]);var handleInputName=function handleInputName(event){setNewName(event.target.value);};var handleInputNum=function handleInputNum(event){setNewNumber(event.target.value);};var handleNotification=function handleNotification(message){setNotification(message);setTimeout(function(){setNotification(null);},5000);};var addNote=function addNote(event){event.preventDefault();if(newName.length<1||newNumber.length<1)return;var repeated=allPersons.filter(function(person){return person.name===newName;});if(repeated.length>0){if(window.confirm(\"\".concat(newName,\" already exists. Do you want to replace the old number with the new one ?\"))){var updatedNumber=_objectSpread(_objectSpread({},repeated[0]),{},{number:newNumber});personDB.update(updatedNumber).then(function(response){setAllPersons(allPersons.map(function(person){return person.id==response.id?response:person;}));handleNotification(\"\".concat(response.name,\" updated Successfully\"));});}return;}var newObj={name:newName,number:newNumber,id:allPersons.reduce(function(t,person){return Math.max(person.id,t);},0)+1};personDB.create(newObj).then(function(response){setAllPersons(allPersons.concat(response));handleNotification(\"\".concat(response.name,\" Added Successfully\"));});setNewName('');setNewNumber('');};var handleDeletePerson=function handleDeletePerson(id){setAllPersons(allPersons.filter(function(person){return person.id!=id;}));};var handleNewFilter=function handleNewFilter(event){setNewFilter(event.target.value);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"PhoneBook\"}),/*#__PURE__*/_jsx(Notification,{message:notification}),/*#__PURE__*/_jsx(Filter,{msg:\"Filter shown with\",value:newFilter,onChange:handleNewFilter}),/*#__PURE__*/_jsx(PersonForm,{onSubmit:addNote,newName:newName,namehandler:handleInputName,newNumber:newNumber,numberhandler:handleInputNum}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(Display,{allpersons:allPersons,newFilter:newFilter,handleDeletePerson:handleDeletePerson})})})]});};export default App;","map":{"version":3,"sources":["/home/mohamed/fullstackopen/part2/phonebook/src/App.js"],"names":["React","useEffect","useState","Display","PersonForm","Filter","personDB","Notification","App","allPersons","setAllPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","notification","setNotification","getAll","then","data","handleInputName","event","target","value","handleInputNum","handleNotification","message","setTimeout","addNote","preventDefault","length","repeated","filter","person","name","window","confirm","updatedNumber","number","update","response","map","id","newObj","reduce","t","Math","max","create","concat","handleDeletePerson","handleNewFilter"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Display from './Components/Display';\nimport PersonForm from './Components/PersonForm';\nimport Filter from './Components/Filter';\nimport personDB from './services/personsDB';\nimport Notification from './Components/Notification';\n\nconst App = () => {\n  const [allPersons, setAllPersons] = useState([]);\n  const [newName , setNewName] = useState('');\n  const [newNumber , setNewNumber] = useState('');\n  const [newFilter , setNewFilter] = useState('');\n  const [notification , setNotification] = useState(null);\n\n  /*useEffect(() =>\n    axios\n        .get(\"http://localhost:3001/persons\")\n        .then(response =>{\n            setAllPersons(response.data);\n        })\n  ,[])*/\n  \nuseEffect(() =>{\n  personDB.getAll().then(data => setAllPersons(data));\n}, [])\n  \n\n  const handleInputName = (event) =>{\n    setNewName(event.target.value);\n  }\n\n  const handleInputNum = (event) =>{\n    setNewNumber(event.target.value);\n  }\n  \n  const handleNotification = message =>{\n    setNotification(message);\n    setTimeout(() => {\n      setNotification(null)\n    }, 5000);\n  }\n\n  const addNote = (event) =>{\n\n    event.preventDefault()\n\n    if(newName.length < 1 || newNumber.length < 1) return\n    \n    const repeated = allPersons.filter(person => person.name === newName);\n\n    if(repeated.length > 0){\n        if(window.confirm(`${newName} already exists. Do you want to replace the old number with the new one ?`)){\n          const updatedNumber = {...repeated[0] , number : newNumber}\n\n          personDB.update(updatedNumber)\n          .then(response =>{\n            setAllPersons(allPersons.map(person =>\n              person.id == response.id ? response : person\n            ))\n            handleNotification(\n              `${response.name} updated Successfully`\n            )\n          })\n\n        }\n        return\n    }\n\n    const newObj = {\n        name : newName,\n        number : newNumber,\n        id : allPersons.reduce((t,person) => Math.max(person.id, t),0) +1\n    }\n    personDB.create(newObj).then(response => {\n      setAllPersons(allPersons.concat(response));\n      handleNotification(`${response.name} Added Successfully`) \n\n    })\n    setNewName(''); \n    setNewNumber('');\n\n  }\n\n  const handleDeletePerson = (id) =>{\n    \n    setAllPersons(allPersons.filter(\n      person=> person.id != id\n    ))\n\n  }\n  \n\n  const handleNewFilter = (event) =>{\n    setNewFilter(event.target.value)\n  }\n\n  return (\n    <div>\n\n      <h2>PhoneBook</h2>\n      <Notification message = {notification} />\n      <Filter msg = 'Filter shown with' value = {newFilter} onChange={handleNewFilter}/>\n\n      <PersonForm onSubmit = {addNote} newName = {newName}\n                  namehandler = {handleInputName}\n                  newNumber = {newNumber} numberhandler = {handleInputNum}/>\n\n     <h2>Numbers</h2>\n      <div>\n        <ul>\n          <Display allpersons = {allPersons} newFilter \n              = {newFilter} handleDeletePerson ={handleDeletePerson}/> \n        </ul>\n      </div>\n    </div>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}